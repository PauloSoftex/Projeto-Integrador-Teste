<!DOCTYPE html >
< html  lang =" pt-br " >
< cabe√ßa >
    < meta  conjunto de caracteres =" UTF-8 " >
    < meta  name =" viewport " content =" width=device-width, initial-scale=1.0 " >
    < title > Mini Loja </ title >
    < link  rel =" folha de estilo " href =" ./Estetica.css " >
</ cabe√ßa >
< corpo >
    < h1 > Mini Loja </ h1 >
    < div  class =" cont√™iner " >
        <!-- Produtos -->
        < div  class =" produtos " >
            < h2 > üì¶Produtos </ h2 >
            < div  class =" grid-produtos " id =" lista-Produtos " > </ div >
        </div>‚Äã‚Äã

        <!-- Carrinho -->
        < div  class =" carrinho " >
            < h2 > üõíCarrinho </ h2 >
            < ul  id =" listaCarrinho " > </ ul >
            < p  class =" total " > Total: < span  id =" total " > R$ 0,00 </ span > </ p >
        </div>‚Äã‚Äã
    </div>‚Äã‚Äã

    < script >
        // Lista de produtos
        deixe  produtos  =  [
            { nome : "Camisa" ,  pre√ßo : 50 } ,
            { nome : "T√™nis" ,  pre√ßo : 200 } ,
            { nome : "Livro" ,  pre√ßo : 80 } ,
            { nome : "fone" ,  pre√ßo : 120 } ,
        ] ;

        // Carrinho vazio
        deixe  carrinho  =  [ ] ;

        // Fun√ß√£o para formatar o pre√ßo
        fun√ß√£o  formatarPreco ( valor )  {
             valor de retorno . toLocaleString ( "pt-br" ,  { estilo : "moeda" ,  moeda : "BRL" } ) ;
        }

        // Fun√ß√£o para mostrar os produtos na p√°gina
        fun√ß√£o  mostrarProdutos ( )  {
            deixe  listaProdutos  =  documento . getElementById ( "lista-Produtos" ) ;
            listaProdutos . innerHTML  =  "" ;
            para  ( deixe  i  =  0 ;  i  <  produtos . comprimento ;  i ++ )  {
                listaProdutos . innerHTML  +=  '<div class="produto">'  +
                    '<strong>'  +  produtos [ i ] . nome  +  '</strong><br>'  +
                    formatarPreco ( produtos [ i ] . preco )  +  '<br>'  +
                    '<button onclick="adicionarAoCarrinho('  +  i  +  ')">Adicionar</button>'  +
                    '</div>' ;
            }
        }

        // Fun√ß√£o para adicionar ao carrinho
        function  adicionarAoCarrinho ( √≠ndiceProduto )  {
            let  produto  =  produtos [ √≠ndiceProduto ] ;
            deixe  produtoNoCarrinho  =  null ;

            // Verifique se o produto j√° est√° no carrinho
            para  ( deixe  i  =  0 ;  i  <  carrinho . comprimento ;  i ++ )  {
                if  ( carrinho [ i ] . nome  ===  produto . nome )  {
                    produtoNoCarrinho  =  carrinho [ i ] ;
                    quebrar ;
                }
            }

            se  ( produtoNoCarrinho )  {
                // Se o produto j√° est√° no carrinho, aumenta a quantidade
                produtoNoCarrinho . quantidade ++ ;
            }  outro  {
                // Caso contr√°rio, adicione o produto ao carrinho
                carrinho . push ( {
                    nome : produto . nome ,
                    preco : produto . preco ,
                    quantidade : 1
                } ) ;
            }

            atualizarCarrinho ( ) ;
        }

        // Fun√ß√£o para remover item do carrinho
        fun√ß√£o  removerDoCarrinho ( nomeProduto )  {
            para  ( deixe  i  =  0 ;  i  <  carrinho . comprimento ;  i ++ )  {
            if  ( carrinho [ i ] . nome  ===  nomeProduto )  { carrinho [ i ] . quantidade -- ;
                if  ( carrinho [ i ] . quantidade  <=  0 )  {
                    carrinho . splice ( i , 1 ) ;
                }
                quebrar ;
                }
            }
            atualizarCarrinho ( ) ;
        }

        // Fun√ß√£o para excluir produto do carrinho

        function  excluirProduto ( nomeProduto )  {
            carrinho  =  carrinho . filter ( item  =  > item.nome ! == nomeProduto ) ;  
            atualizarCarrinho ( ) ;
        }

        // Fun√ß√£o para atualizar a exibi√ß√£o do carrinho
        function  atualizarCarrinho ( )  {
            deixe  listaCarrinho  =  documento . getElementById ( 'listaCarrinho' ) ;
            deixe  totalElemento  =  document . getElementById ( 'total' ) ;

            listaCarrinho . innerHTML  =  "" ;

            se  ( carrinho . comprimento  ===  0 )  {
                listaCarrinho . innerHTML  =  '<p class="vazio">Carrinho Vazio</p>' ;
                totalElemento . textContent =  formatarPreco ( 0 ) ;
            }  outro  {
                deixe  total  =  0 ;
                para  ( deixe  i  =  0 ;  i  <  carrinho . comprimento ;  i ++ )  {
                    deixe  item  =  carrinho [ i ] ;
                    deixe  precoTotal  =  item . pre√ßo  *  item . quantidade ;
                    listaCarrinho . innerHTML  +=  '<li>'  +  item . nome  +  ' (x'  +  item . quantidade  +  ') - '  +  formatarPreco ( precoTotal )  +  '<br>'  +
                        '<button onclick="adicionarAoCarrinhoPorNome(\''  +  item . nome  +  '\')">+</button>'  +
                        '<button onclick="removerDoCarrinho(\''  +  item . nome  +  '\')">-</button>'  +
                        '<button onclick="excluirProduto(\''  +  item . nome  +  '\')">Excluir</button>'  +  '</li>' ;
                    total  +=  precoTotal ;
                }
                totalElemento . textContent  =  formatarPreco ( total ) ;
            }
        }

        // Fun√ß√£o auxiliar para adicionar o produto pelo nome
        function  adicionarAoCarrinhoPorNome ( nomeProduto )  {
            para  ( deixe  i  =  0 ;  i  <  produtos . comprimento ;  i ++ )  {
                if  ( produtos [ i ] . nome  ===  nomeProduto )  {
                    adicionarAoCarrinho ( i ) ;
                    quebrar ;
                }
            }
        }

        // Inicializar a p√°gina
        mostrarProdutos ( ) ;
        atualizarCarrinho ( ) ;
    </ script >
</ corpo >
</ html >
</body>
</html>